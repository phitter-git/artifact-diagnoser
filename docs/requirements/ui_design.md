# UI設計方針

このドキュメントでは、聖遺物診断器のUI/UX設計方針とコンポーネント構成を定義します。

---

## 📖 目次

1. [デザイン原則](#デザイン原則)
2. [カラースキーム](#カラースキーム)
3. [レイアウト構成](#レイアウト構成)
4. [画面別UI設計](#画面別ui設計)
5. [コンポーネント一覧](#コンポーネント一覧)
6. [レスポンシブ対応](#レスポンシブ対応)
7. [アクセシビリティ](#アクセシビリティ)

---

## 1. デザイン原則

### 基本方針

#### 1.1 Genshin Impactの世界観を踏襲
- ゲーム内UIのカラーパレットを参考
- アイコンや装飾はGenshin風に統一
- フォントは読みやすさ優先（ゲーム内フォント使用は権利上注意）

#### 1.2 データの視覚化を重視
- 複雑な数値も直感的に理解できるよう視覚化
- グラフ、プログレスバー、色分けを活用
- 重要な情報は目立つように配置

#### 1.3 操作のシンプルさ
- 1画面につき1つの主要アクション
- タップ/クリックでの直感的な操作
- 迷わないナビゲーション

---

## 2. カラースキーム

### プライマリカラー

Genshin Impactのレアリティカラーを基本とします。

| 用途 | 色 | HEX | 使用場面 |
|------|-----|-----|---------|
| **レジェンダリー** | 🟨 金色 | `#FFD700` | SSSランク、最高レアリティ |
| **エピック** | 🟪 紫色 | `#A256E1` | SSランク、5星相当 |
| **レア** | 🟦 青色 | `#4A90E2` | Sランク、4星相当 |
| **アンコモン** | 🟩 緑色 | `#73C990` | A/Bランク、良好 |
| **コモン** | ⚪ 灰色 | `#9E9E9E` | C/Dランク、普通以下 |

### セカンダリカラー

| 用途 | 色 | HEX |
|------|-----|-----|
| 背景 | ダークブルー | `#1A2332` |
| カード背景 | ダークグレー | `#2C3E50` |
| テキスト | ホワイト | `#FFFFFF` |
| サブテキスト | ライトグレー | `#B0B0B0` |
| アクセント | オレンジ | `#FF9800` |

---

## 3. レイアウト構成

### 基本レイアウト

```
┌─────────────────────────────────────┐
│  Header (ナビゲーション)              │
├─────────────────────────────────────┤
│                                     │
│                                     │
│  Main Content                       │
│  (画面ごとに異なる)                  │
│                                     │
│                                     │
├─────────────────────────────────────┤
│  Footer (オプション)                 │
└─────────────────────────────────────┘
```

### グリッドシステム
- **デスクトップ**: 12カラムグリッド
- **タブレット**: 8カラムグリッド
- **モバイル**: 4カラムグリッド

### スペーシング
- **Extra Small (XS)**: 4px
- **Small (S)**: 8px
- **Medium (M)**: 16px
- **Large (L)**: 24px
- **Extra Large (XL)**: 32px

---

## 4. 画面別UI設計

### 4.1 ホーム画面（UID入力）

```
┌─────────────────────────────────────┐
│  ╔═══════════════════════════════╗  │
│  ║   聖遺物診断器                 ║  │
│  ║   Artifact Diagnoser          ║  │
│  ╚═══════════════════════════════╝  │
├─────────────────────────────────────┤
│                                     │
│  UIDを入力してください               │
│  ┌─────────────────┐               │
│  │  123456789      │  [読み込み]   │
│  └─────────────────┘               │
│                                     │
│  💡 UIDはゲーム内で確認できます       │
│                                     │
│  ─────────────────────              │
│                                     │
│  📚 前回のデータ                     │
│  ┌─────────────────────────────┐   │
│  │  UID: 123456789              │   │
│  │  最終更新: 2025-10-12 14:30  │   │
│  │  [このデータを読み込む]        │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 4.2 聖遺物一覧画面

```
┌─────────────────────────────────────┐
│  ← 戻る  │  聖遺物一覧  │  設定 ⚙    │
├─────────────────────────────────────┤
│  フィルター: [全て▼] [スコア順▼]      │
├─────────────────────────────────────┤
│  ┌───────────┐ ┌───────────┐        │
│  │ 🌸 花      │ │ 🪶 羽       │        │
│  │ スコア: 45.7│ │ スコア: 38.2│        │
│  │ ランク: SS  │ │ ランク: A   │        │
│  └───────────┘ └───────────┘        │
│  ┌───────────┐ ┌───────────┐        │
│  │ ⏰ 時計     │ │ 🏺 杯       │        │
│  │ スコア: 32.1│ │ スコア: 29.5│        │
│  │ ランク: B   │ │ ランク: B   │        │
│  └───────────┘ └───────────┘        │
└─────────────────────────────────────┘
```

### 4.3 聖遺物詳細画面

```
┌─────────────────────────────────────┐
│  ← 一覧へ  │  聖遺物詳細             │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │  [花のアイコン]              │   │
│  │  炎魔女の燃え盛る炎            │   │
│  │  +20                         │   │
│  └─────────────────────────────┘   │
│                                     │
│  総合スコア: 45.7  [SS]              │
│  ████████████████████░ 92%          │
│  💡 花・羽・杯の基準でランク判定      │
│                                     │
│  メインステータス                     │
│  ┌─────────────────────────────┐   │
│  │  HP: 4,780                   │   │
│  └─────────────────────────────┘   │
│                                     │
│  サブオプション                       │
│  [+0] [+4] [+8] [+12] [+16] [+20]   │
│  ┌─────────────────────────────┐   │
│  │ ● 会心率      7.8%   [+3.5%] │   │
│  │ ● 会心ダメージ 20.2%  [+7.8%] │   │
│  │ ○ 攻撃力%     9.9%           │   │
│  │ ○ 防御力%     6.5%           │   │
│  └─────────────────────────────┘   │
│                                     │
│  [再構築シミュレーション]              │
└─────────────────────────────────────┘
```

**スコアランク表示の仕様:**
- **色とバッジ**: スコアに応じて色分けされたランクバッジを表示(SSS/SS/S/A/B/C/D)
- **プログレスバー**: 理論値に対する達成率を視覚化
- **部位別基準**: 花羽杯/砂(-5.0)/冠(-10.0)の基準で自動判定
  - 例: 砂でスコア42.0 → 基本基準ではS、砂基準ではSS
  - 例: 冠でスコア38.0 → 基本基準ではA、冠基準ではSS
- **ヒント表示**: 💡マークで現在の部位の評価基準を表示

### 4.4 スコアリング設定画面

```
┌─────────────────────────────────────┐
│  ← 戻る  │  スコア設定               │
├─────────────────────────────────────┤
│  評価するステータスを選択             │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ☑ 会心率                     │   │
│  │ ☑ 会心ダメージ               │   │
│  │ ☑ 攻撃力%                    │   │
│  │ ☐ 防御力%                    │   │
│  │ ☐ HP%                        │   │
│  │ ☐ 元素熟知                   │   │
│  │ ☐ 元素チャージ効率           │   │
│  └─────────────────────────────┘   │
│                                     │
│  プリセット                          │
│  ┌─────┐ ┌─────┐ ┌─────┐        │
│  │会心  │ │攻撃  │ │元素  │        │
│  │特化  │ │特化  │ │反応  │        │
│  └─────┘ └─────┘ └─────┘        │
│                                     │
│  [設定を保存]                        │
└─────────────────────────────────────┘
```

---

## 5. コンポーネント一覧

### 5.1 表示系コンポーネント

#### ReliquaryCard(聖遺物カード)
```dart
class ReliquaryCard extends StatelessWidget {
  final ReliquarySummary reliquary;
  final VoidCallback? onTap;
  
  // 聖遺物の概要を表示するカード
  // - アイコン
  // - 名前
  // - スコア
  // - ランク(部位別基準で自動判定)
  //   - 花羽杯: 基本基準
  //   - 砂: -5.0寛容
  //   - 冠: -10.0寛容
}
```

#### ScoreDisplay(スコア表示)
```dart
class ScoreDisplay extends StatelessWidget {
  final double score;
  final ScoreRank rank;
  final String slotType; // 部位(EQUIP_BRACER/EQUIP_NECKLACE/EQUIP_SHOES/EQUIP_RING/EQUIP_DRESS)
  final bool showProgressBar;
  
  // スコアとランクを視覚的に表示
  // - 大きな数字
  // - ランクバッジ(部位別基準で判定)
  // - プログレスバー(オプション)
  // 
  // 部位別ランク判定:
  // - 花(BRACER)・羽(NECKLACE)・杯(RING): 基本基準
  // - 時計(SHOES): -5.0寛容
  // - 冠(DRESS): -10.0寛容
}
```

#### SubstatList（サブオプション一覧）
```dart
class SubstatList extends StatelessWidget {
  final List<SubstatSummary> substats;
  final int currentLevel;
  
  // サブオプションのリスト表示
  // - ステータス名
  // - 現在値
  // - 強化マーク
}
```

### 5.2 入力系コンポーネント

#### UIDInput（UID入力フィールド）
```dart
class UIDInput extends StatefulWidget {
  final void Function(String uid) onSubmit;
  final String? errorMessage;
  
  // UID入力用のテキストフィールド
  // - 9桁の数字のみ入力可能
  // - バリデーション
  // - エラー表示
}
```

#### StatSelector（ステータス選択）
```dart
class StatSelector extends StatefulWidget {
  final ScoringSettings initialSettings;
  final void Function(ScoringSettings) onChanged;
  
  // スコアリング対象ステータスの選択UI
  // - チェックボックスリスト
  // - プリセットボタン
}
```

### 5.3 フィードバック系コンポーネント

#### LoadingIndicator（ローディング表示）
```dart
class LoadingIndicator extends StatelessWidget {
  final String message;
  
  // ローディング中の表示
  // - スピナー
  // - メッセージ
}
```

#### ErrorDisplay（エラー表示）
```dart
class ErrorDisplay extends StatelessWidget {
  final String message;
  final VoidCallback? onRetry;
  
  // エラーメッセージ表示
  // - アイコン
  // - メッセージ
  // - リトライボタン（オプション）
}
```

---

## 6. レスポンシブ対応

### ブレークポイント

| デバイス | 幅 | レイアウト |
|---------|-----|-----------|
| モバイル | 〜 600px | 1カラム、シングルビュー |
| タブレット | 601px 〜 1024px | 2カラム、サイドメニュー |
| デスクトップ | 1025px 〜 | 3カラム、フル機能 |

### モバイル優先設計
- まずモバイルUIを完成させる
- 段階的にデスクトップ機能を追加
- タッチ操作を前提とした大きなタップ領域

---

## 7. アクセシビリティ

### 基本要件
- **コントラスト比**: WCAG AA準拠（4.5:1以上）
- **フォントサイズ**: 最小14px（本文）、16px（ボタン）
- **タッチ領域**: 最小44x44px
- **キーボード操作**: 全機能がキーボードで操作可能
- **スクリーンリーダー**: 適切なラベル付け

### カラーユニバーサルデザイン
- 色だけに頼らない情報伝達
- ランクは色+アイコンで表現
- グラフには補助線やラベルを追加

---

## 📝 更新履歴

| 日付 | 内容 |
|------|------|
| 2025-10-12 | 初版作成、基本UI設計とコンポーネント定義 |
| 2025-10-12 | 部位別スコアランク基準を反映(花羽杯/砂-5.0/冠-10.0) |
